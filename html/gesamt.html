<html>
<head><title>gesamt</title><style>
.red{color:red;}
.green{color:green;}
.nochiv{background:brown;color:red;}
</style></head><body>
<h3>gesamt</h3>
<button onclick="was();">enter</button>
<output id="out"></output>
<!--
<div data-roomid="${el.room_id}" title="${el.descr}" class="nochdiv" style="background:red;">
<figure>${el.src ? `<img src="${el.src}"/>`:''}<figcaption><a href="/webrtc/${el.room_id}">${el.nick}</a>
<b>viewers: </b><span class="rviewers" data-rviewers="${el.v}">${el.v}</span></figcaption></figure></div>`;
-->
<div id="imgContainer">
<div data-roomid="5" title="awesome title" class="nochdiv" style="background:red;">
	
</div>
</div>
<button onclick="remove_das();">remove das</button>
<script>
var sock=null;
function get_socket(){
sock=new WebSocket("ws://localhost:300thydata);
on_msg(evt.data)
}
sock.onclose=function(){
outi("<b class=\"red\">Websocket closed</b>");
}
}
get_socket();
function on_msg(d){
//outi("data: "+d+"<br>");
try{
var ajson=JSON.parse(d);	
}catch(e){return;}
if(ajson.typ=="atair"){
var  emg=document.createElement('img');
var nochdiv=document.createElement('div');
	emg.src=ajson.src;
	nochdiv.appendChild(emg);
	nochdiv.className="nochdiv";
	nochdiv.setAttribute("data-roomid", ajson.roomid);
	nochdiv.setAttribute("title",ajson.roomdesc);
	imgContainer.appendChild(nochdiv);
}else if(ajson.typ=="outair"){
var seli=document.querySelector('[data-roomid="'+ajson.roomid+'"]');	
if(seli)seli.remove();
}
}

function remove_das(){
var roomid=6666;
var seli=document.querySelector('[data-roomid="'+roomid+'"]');
if(seli){
console.log('seli');
seli.remove();
}		
}
function outi(d){
out.innerHTML+=d;	
}
</script>
</body>
</html>
